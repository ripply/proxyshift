var string = 'string';
var increments = 'increments';
var integer = 'integer';
var cascade = 'cascade';
var restrict = 'restrict';
var boolean = 'boolean';
var date = 'date';

// http://blog.ragingflame.co.za/2014/7/21/using-nodejs-with-mysql

var Schema = {
    // Key values are Model names
    // table names are generated by
    // lower-casing
    // and pluralizing
    User: {
        id: {
            type: increments,
            nullable: false
        },
        username: {
            type: string,
            unique: true,
            nullable: false,
            maxlen: 20
        },
        firstname: {
            type: string,
            nullable: false
        },
        lastname: {
            type: string,
            nullable: false
        },
        email: {
            type: string,
            unique: true,
            nullable: false
        },
        password: {
            type: string,
            unique: false,
            maxlen: 100,
            nullable: false
        },
        squestion: {
            type: string,
            nullable: false
        },
        sanswer: {
            type: string,
            nullable: false
        },
        phonehome: {
            type: string
        },
        phonemobile: {
            type: string,
            unique: true
        },
        pagernumber: {
            type: string
        }
    },
    Shift: {
        id: {
            type: increments
        },
        group_id: {
            type: integer,
            references: 'id',
            inTable: 'groups',
            onDelete: cascade
        },
        user_id: {
            type: integer,
            references: 'id',
            inTable: 'users',
            onDelete: cascade
        },
        title: {
            type: string,
            maxlen: 30,
            nullable: false
        },
        decription: {
            type: string,
            maxlen: 30
        },
        allDay: {
            type: boolean,
            defaultTo: false
        },
        recurring: {
            type: boolean,
            defaultTo: false
        },
        start: {
            type: date,
            nullable: false
        },
        end: {
            type: date,
            nullable: false
        }
    },
    Group: {
        id: {
            type: increments
        },
        user_id: {
            type: integer,
            references: 'id',
            inTable: 'users',
            onDelete: restrict
        },
        name: {
            type: string,
            nullable: false
        },
        state: {
            type: string
        },
        city: {
            type: string
        },
        address: {
            type: string
        },
        zipcode: {
            type: integer // TODO: this should be a string? zipcodes can have - in them
        },
        weburl: {
            type: string
        },
        contactemail: {
            type: string,
            nullable: false
        },
        contactphone: {
            type: integer
        },
        groupsetting_id: {
            type: integer,
            references: 'id',
            inTable: 'groupsettings',
            unique: true,
            nullable: false
        }
    },
    UserGroup: {
        id: {
            type: increments
        },
        user_id: {
            type: integer,
            references: 'id',
            inTable: 'users',
            onDelete: cascade
        },
        group_id: {
            type: integer,
            references: 'id',
            inTable: 'groups',
            onDelete: cascade
        }
    },
    Token: {
        id: {
            type: increments
        },
        user_id: {
            type: integer,
            references: 'id',
            inTable: 'users',
            onDeleet: cascade,
            nullable: false
        },
        token: {
            type: string,
            nullable: false,
            unique: true
        },
        date: {
            type: date,
            nullable: false
        }
    },
    GroupUserClass: {
        id: {
            type: increments
        },
        title: {
            type: string,
            maxlen: 50,
            unique: true,
            nullable: false
        },
        description: {
            type: string,
            maxlen: 50
        }
    },
    Location: {
        id: {
            type: increments
        },
        group_id: {
            type: integer,
            references: 'id',
            inTable: 'groups',
            onDelete: restrict, // prevent accidental deletion of a location
            nullable: false
        },
        state: {
            type: string,
            nullable: false
        },
        city: {
            type: string,
            nullable: false
        },
        address: {
            type: string,
            nullable: false
        },
        zipcode: {
            type: integer,
            nullable: false
        },
        phonenumber: {
            type: integer,
            nullable: false
        }
    },
    Area: {
        id: {
            type: increments
        },
        title: {
            type: string,
            nullable: false,
            // TODO: If we have one database for the entire site it doesn't make sense to have this be unique, each company can have identically named places
            unique: false
        }
    },
    AreaLocation: {
        id: {
            type: increments
        },
        location_id: {
            type: integer,
            references: 'id',
            inTable: 'locations',
            onDelete: cascade
        },
        area_id: {
            type: integer,
            references: 'id',
            inTable: 'areas',
            onDelete: cascade
        }
    },
    UserPermission: {
        id: {
            type: increments
        },
        location_id: {
            type: integer,
            references: 'id',
            inTable: 'locations',
            onDelete: cascade,
            nullable: false
        },
        user_id: {
            type: integer,
            references: 'id',
            inTable: 'users',
            onDelete: cascade,
            nullable: false
        }
    },
    GroupSetting: {
        id: {
            type: increments
        },
        allowalltocreateshifts: {
            type: boolean,
            defaultTo: false
        },
        requireshiftconfirmation: {
            type: boolean,
            defaultTo: true
        }
    },
    GroupAdditionalInformation: {
        id: {
            type: increments
        },
        group_id: {
            type: integer,
            references: 'id',
            inTable: 'groups',
            onDelete: cascade,
            nullable: false
        },
        title: {
            type: string,
            nullable: false
        }
    },
    GroupUserInformation: {
        id: {
            type: increments
        },
        usersid: {
            type: integer,
            references: 'id',
            inTable: 'users',
            onDelete: cascade,
            nullable: false
        },
        groupadditionalinformation_id: {
            type: integer,
            references: 'id',
            inTable: 'groupadditionalinformations',
            onDelete: cascade,
            nullable: false
        },
        data: {
            type: string,
            nullable: false
        }
    },
    GroupPermission: {
        id: {
            type: increments
        },
        groupsetting_id: {
            type: integer,
            references: 'id',
            inTable: 'groupsettings',
            onDelete: cascade,
            nullable: false
        },
        decription: {
            type: string,
            nullable: false
        },
        permissionlevel: {
            // TODO: What is this table for? it doesnt link to a user or location
            type: integer,
            nullable: false
        }
    }
};

module.exports = {
    Schema: Schema
};