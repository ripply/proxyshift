<ion-modal-view class="create-shift-modal" ng-controller="CreateShiftModalController">
    <ion-header-bar class="bar bar-header bar-dark">
        <h1 class="title">Request Shift Coverage</h1>
        <div class="buttons">
            <button class="button button-icon ion-close" ng-click="closeModal()"></button>
        </div>
    </ion-header-bar>
    <div class="bar bar-subheader bar-dark">
            <h3 class="title">{{header}}</h3>
    </div>
    <div class="create-shift-steps unclickable">
        <div class="row row-no-padding">
            <div class="col-20"></div>
            <div class="col-20"></div>
            <div class="col-20"></div>
            <div class="col-20"></div>
            <div class="col-20">
                <div ng-show="prev"
                     ng-click="prevClicked()"
                     class="icon ion-chevron-up next-button"></div>
                <div ng-show="next"
                     ng-click="nextClicked()"
                     class="icon ion-chevron-down next-button"></div>
            </div>
        </div>
        <ul id="progressbar">
            <li ng-class="{'active': index >= 0, 'review': index >= 4, 'locked': steps['create-shift-date'].locked}" ng-click="navigateTo('create-shift-date')">DATE(S)</li>
            <li ng-class="{'active': index >= 1, 'review': index >= 4, 'locked': steps['create-shift-when'].locked}" ng-click="navigateTo('create-shift-when')">WHEN</li>
            <li ng-class="{'active': index >= 2, 'review': index >= 4, 'locked': steps['create-shift-where'].locked}" ng-click="navigateTo('create-shift-where')">WHERE</li>
            <li ng-class="{'active': index >= 3, 'review': index >= 4, 'locked': steps['create-shift-who'].locked}" ng-click="navigateTo('create-shift-who')">WHO</li>
            <li ng-class="{'active': index >= 4, 'review': index >= 4, 'locked': steps['create-shift-review'].locked}" ng-click="navigateTo('create-shift-review')">Review</li>
        </ul>
    </div>
    <ion-content class="has-subheader">
        <div class="forms" id="create-shift-date" ng-class="{'create-shift-form-hide': !steps['create-shift-date'].show}">
            <div class="form-offset">
                <div class="create-shift-content">
                    <shift-calendar toggle="false" show="true" name="create-shift-calendar" multiple="true" clickable="true" cant-click-yesterday="true"></shift-calendar>
                </div>
            </div>
        </div>
        <div class="forms"
             ng-attr-id="{{'create-shift-when-' + day.key}}"
             ng-repeat="day in date"
             ng-class="{'create-shift-form-hide': !steps['create-shift-when-' + day.key].show, 'create-shift-form-visible': !sliding && steps['create-shift-when-' + day.key].show}">
            <div class="form-offset">
                <div class="create-shift-content">
                    <div class="row">
                        <div class="col col-20 uniform-padding">
                            <h4 class="sub-subheader">Start:</h4>
                        </div>
                        <div class="col col-80">
                            <ionic-timepicker-embed input-obj="dateState[day.key].time"></ionic-timepicker-embed>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col col-20 uniform-padding">
                            <h4 class="sub-subheader">Length:</h4>
                        </div>
                        <div class="col col-80">
                            <ionic-timepicker-hours-embed input-obj="dateState[day.key].hours"></ionic-timepicker-hours-embed>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col col-20 uniform-padding">
                            <h4 class="sub-subheader nowrap">Employees needed:</h4>
                        </div>
                        <div class="col col-80">
                            <div class="row">
                                <span class="button-small col col-25">
                                    &nbsp;
                                </span>
                                <label class="col col-10">&nbsp;</label>
                                <span class="button-small col col-25">
                                    &nbsp;
                                </span>
                                <label class="col col-10">&nbsp;</label>
                                <span class="button-small col col-25">
                                    <button type="button" class="button button-clear button-small button-dark timePickerArrows marginBottom10"
                                            ng-click="incrementEmployees(day.key)">
                                        <i class="icon ion-chevron-up"></i></button>
                                    <div ng-bind="dateState[day.key].counter" class="ipBoxes timePickerBoxText"></div>
                                    <button type="button" class="button button-clear button-small button-dark timePickerArrows marginTop10"
                                            ng-click="decrementEmployees(day.key)">
                                        <i class="icon ion-chevron-down"></i></button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="forms" id="create-shift-where" ng-class="{'create-shift-form-hide': !steps['create-shift-where'].show, 'create-shift-form-visible': !sliding && steps['create-shift-where'].show}">
            <div class="create-shift-content centered-input">
                <div class="list list-inset">
                    <label class="item item-input">
                        <i class="icon ion-search placeholder-icon"></i>
                        <input type="text" ng-model="query" ng-style="{'width' : '100%'}"
                               placeholder="Search by name, email or phone">
                    </label>
                </div>
                <ion-scroll delegate-handle="shift-where" ng-style="{'height': currentStepDivHeight / 2}">
                    <ion-list
                        type="list-inset"
                        show-delete="false"
                        show-reorder="false"
                        can-swipe="false">
                        <ion-item
                            class="item clear-padding"
                            ng-class="{'location-selected': location.selected}"
                            ng-click="locationClicked(location)"
                            ng-repeat="location in users | filter:query">
                            {{location.address}}
                        </ion-item>
                    </ion-list>
                    <ion-infinite-scroll
                        ng-if="moreToLoad()"
                        on-infinite="loadMore()"
                        distance="20%">
                    </ion-infinite-scroll>
                </ion-scroll>
                <div>
                    Floor
                    <ion-list
                        type="list-inset"
                        show-delete="false"
                        show-reorder="false"
                        can-swipe="false">
                        <ion-item
                            class="item clear-padding"
                            ng-class="{'location-selected': sublocation.selected}"
                            ng-click="sublocationClicked(sublocation)"
                            ng-repeat="sublocation in sublocations">
                            {{sublocation.title}}
                        </ion-item>
                    </ion-list>
                </div>
            </div>
        </div>
        <div class="forms" id="create-shift-who" ng-class="{'create-shift-form-hide': !steps['create-shift-who'].show, 'create-shift-form-visible': !sliding && steps['create-shift-who'].show}">
            <div class="create-shift-content">
                description
                <textarea rows="4" cols="50" style="width: 100%; height: 20%;" ng-model="description"></textarea>
                <ion-scroll delegate-handle="shift-who" ng-style="{'height': currentStepDivHeight / 3}">
                    <ion-list
                        type="list-inset"
                        show-delete="false"
                        show-reorder="false"
                        can-swipe="false">
                        <ion-item
                            class="item clear-padding"
                            ng-class="{'location-selected': job.selected}"
                            ng-click="jobTypeClicked(job)"
                            ng-repeat="job in jobTypes">
                            {{job.title}} - {{job.description}}
                        </ion-item>
                    </ion-list>
                </ion-scroll>
            </div>
        </div>
        <div class="forms" id="create-shift-review" ng-class="{'create-shift-form-hide': !steps['create-shift-review'].show, 'create-shift-form-visible': !sliding && steps['create-shift-review'].show}">
            <div class="create-shift-content">
                {{description}}
                <ion-scroll delegate-handle="shift-review" ng-style="{'height': currentStepDivHeight * 0.8}">
                    <div ng-repeat="day in date">
                        <p>Shift {{date.indexOf(day) + 1}}</p>
                        <p>Date: {{day.key}}</p>
                        <p>Begins: {{dateState[day.key].time}}</p>
                        <p>Shift Duration: {{dateState[day.key].hours}} hours</p>
                        <p>Employees needed: {{dateState[day.key].counter}}</p>
                    </div>
                </ion-scroll>
            </div>
        </div>
    </ion-content>
    <div class="block-input" ng-show="blockInput"></div>
</ion-modal-view>
