<link href="../css/shifts.css" rel="stylesheet">
<ion-list
    class="has-header"
    show-delete="false"
    show-reorder="false"
    ng-if="Model"
    can-swipe="swipable">
    <div collection-repeat="shift in Model" item-height="shift.canceled || (acceptedOnly && (!acceptedOnly || !acceptedOrApprovedShiftOrDivider(shift))) ? 0:(shift.isDivider ? 40:(shift.description.length > 0 ? 120:100))"
         item-width="100%"
         class="shift-list"
         ng-show="(!shift.canceled && (!acceptedOnly || (acceptedOnly && acceptedOrApprovedShiftOrDivider(shift))) && markShiftVisible(shift)) || markShiftNotVisible(shift)">
        <div ng-class="{'card': !shift.isDivider, 'divider-card': shift.isDivider, 'applied-to-shift': manageable ? (!shift.isDivider && isShiftApproved(shift)) : (acceptedOnly ? isShiftApproved(shift) : shift.applied), 'ignored-shift': manageable ? (!shift.isDivider && !isShiftAppliedFor(shift)):ignoredShift(shift), 'pending-approval': manageable ? (!shift.isDivider && isShiftAppliedFor(shift) && !isShiftApproved(shift)) : (acceptedOnly ? (shift.applied && !isShiftApproved(shift)) : false)}">
            <ion-item
                class="item"
                item-height="shift.isDivider ? 32:(64 + (4 * 2))"
                ng-show="Model">
                <a name="{{shift.start}}"></a>
                <div ng-if="shift.isDivider && shift.type == 'pendingApproval'"
                     class="shift-item list-padding">
                    Shifts pending manager approval
                </div>
                <div ng-if="shift.isDivider && shift.type == 'pendingApprovalExpired'"
                     class="shift-item list-padding">
                    <a ui-sref="{{expiredPendingApproval}}">See more expired shifts pending approval....</a>
                </div>
                <div ng-if="shift.isDivider && shift.type == 'noApplications'"
                     class="shift-item list-padding">
                    Shifts without applications
                </div>
                <div ng-if="shift.isDivider && shift.type == 'noApplicationsExpired'"
                     class="shift-item list-padding">
                    <a ui-sref="{{expiredNoApplications}}">See more expired shifts without applications....</a>
                </div>
                <div ng-if="shift.isDivider && shift.type == 'approved'"
                     class="shift-item list-padding">
                    Approved shifts
                </div>
                <div ng-if="shift.isDivider && shift.type == 'approvedExpired'"
                     class="shift-item list-padding">
                    <a ui-sref="{{expiredApproved}}">See more expired approved shifts....</a>
                </div>
                <div ng-if="shift.isDivider && shift.type == 'declined'"
                     class="shift-item list-padding">
                    Declined shifts
                </div>
                <div ng-if="shift.isDivider && shift.type == 'expired'"
                     class="shift-item list-padding">
                    Expired shifts
                </div>
                <div ng-if="shift.isDivider && shift.type == 'expiredSeeMore'"
                     class="shift-item list-padding">
                    <a ui-sref="{{expiredUri}}">See more expired shifts....</a>
                </div>
                <div ng-if="!shift.isDivider">
                    <div class="shift-item list-padding">
                        <div class="shift-left-icon"><i class="icon ion-ios-checkmark-outline"></i></div>
                        <div ng-class="{'shift-expanded': shift.expanded, 'shift-collapsed': !shift.expanded}">
                            <div class="shift-right">
                                <p class="shift-star" ng-hide="{{userIsInDifferentTimeZone(shift)}}">{{getReadableLocalShiftStartEndTime(shift)}}</p>
                                <p class="shift-star" ng-show="{{userIsInDifferentTimeZone(shift)}}">{{getReadableLocalShiftStartEndTime(shift)}} (local)</p>
                                <p class="shift-duration">{{getReadableShiftDuration(shift)}}</p>
                            </div>
                            <div class="shift-info">
                                <p class="shift-location">{{getShiftsLocation(shift).address || "UNKNOWN LOCATION"}}</p>
                                <p class="shift-title shift-location-floor" ng-show="{{shift.sublocation_id != undefined && shift.sublocation_id != null}}">{{getShiftsSublocation(shift).title || "UNKNOWN"}} - {{getReadableClassType(shift)}}</p>
                                <p class="shift-title" ng-show="{{shift.sublocation_id == undefined || shift.sublocation_id == null}}">{{getReadableClassType(shift)}}</p>
                                <p class="shift-desc">{{shift.description}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="shift-bottom" ng-show="shift.expanded">
                        <button class="button button-outline button-positive shift-accept shift-left">Accept</button>
                        <button class="button button-outline button-assertive shift-decline shift-right">Decline</button>
                    </div>
                    <ion-option-button class="shift-button-manage"
                                       ng-click="info(shift)">
                        Details
                    </ion-option-button>
                    <div ng-if="!manageable">
                        <ion-option-button class="shift-button-apply"
                                           ng-if="!shift.applied"
                                           ng-click="accept(shift)">
                            Apply
                        </ion-option-button>
                        <ion-option-button class="shift-button-decline"
                                           ng-click="decline(shift)"
                                           ng-if="shift.applied">
                            Cancel
                        </ion-option-button>
                        <ion-option-button class="shift-button-ignore"
                                           ng-click="ignore(shift)"
                                           ng-if="!shift.applied && !ignoredShift(shift)">
                            Ignore
                        </ion-option-button>
                    </div>
                </div>
            </ion-item>
        </div>
    </div>
    <ion-item
        ng-show="Model.length == 0 && myUserClasses.length > 0"
        class="item item-icon-right">
        <p>There are currently no open shifts</p>
    </ion-item>
    <ion-item
        ng-show="(!Model || Model.length == 0) && !getGroupId()"
        class="item item-icon-right">
        You are currently not registered with a company. Please contact your manager for an invite link to start receiving shift notifications.
    </ion-item>
    <ion-item
        ng-show="(!Model || Model.length == 0) && !hasUserClasses() && getGroupId()"
        class="item item-icon-right">
        <p>Please <a ui-sref="settings.group.jobs({group_id: groupId})">CLICK HERE</a> to select your job title and select locations you want to receive notifications from.</p>
    </ion-item>
    <!--
    <div class="item item-divider"
         ng-show="ignorableShiftsExist()">
        {{declinedshifttitle}}
    </div>
    -->
</ion-list>
